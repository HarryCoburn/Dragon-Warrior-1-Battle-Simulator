!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=38)}([,function(e,t){e.exports=function(e){return e&&"Widget"===e.type}},function(e,t){e.exports="2"},function(e,t,n){var r=n(2);e.exports=function(e){return e&&"VirtualNode"===e.type&&e.version===r}},function(e,t,n){var r=n(20),a=n(23),o=n(29),i=n(9),u=n(17),l=n(18);e.exports={diff:r,patch:a,h:o,create:i,VNode:u,VText:l}},function(e,t,n){var r=n(2);e.exports=function(e){return e&&"VirtualText"===e.type&&e.version===r}},function(e,t){e.exports=function(e){return e&&"Thunk"===e.type}},function(e,t){e.exports=function(e){return e&&("function"==typeof e.hook&&!e.hasOwnProperty("hook")||"function"==typeof e.unhook&&!e.hasOwnProperty("unhook"))}},function(e,t){var n=Array.isArray,r=Object.prototype.toString;e.exports=n||function(e){return"[object Array]"===r.call(e)}},function(e,t,n){var r=n(15);e.exports=r},function(e,t,n){var r=n(2);function a(e,t,n){this.type=Number(e),this.vNode=t,this.patch=n}a.NONE=0,a.VTEXT=1,a.VNODE=2,a.WIDGET=3,a.PROPS=4,a.ORDER=5,a.INSERT=6,a.REMOVE=7,a.THUNK=8,e.exports=a,a.prototype.version=r,a.prototype.type="VirtualPatch"},function(e,t,n){var r=n(3),a=n(5),o=n(1),i=n(6);function u(e,t){var n=e.vnode;if(n||(n=e.vnode=e.render(t)),!(r(n)||a(n)||o(n)))throw new Error("thunk did not return a valid node");return n}e.exports=function(e,t){var n=e,r=t;i(t)&&(r=u(t,e));i(e)&&(n=u(e,null));return{a:n,b:r}}},function(e,t,n){"use strict";e.exports=function(e){return"object"==typeof e&&null!==e}},function(e,t,n){(function(t){var r,a=void 0!==t?t:"undefined"!=typeof window?window:{},o=n(25);"undefined"!=typeof document?r=document:(r=a["__GLOBAL_DOCUMENT_CACHE@4"])||(r=a["__GLOBAL_DOCUMENT_CACHE@4"]=o),e.exports=r}).call(this,n(14))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(13),a=n(16),o=n(3),i=n(5),u=n(1),l=n(11);e.exports=function e(t,n){var s=n&&n.document||r;var c=n?n.warn:null;t=l(t).a;if(u(t))return t.init();if(i(t))return s.createTextNode(t.text);if(!o(t))return c&&c("Item is not a valid virtual dom node",t),null;var p=null===t.namespace?s.createElement(t.tagName):s.createElementNS(t.namespace,t.tagName);var h=t.properties;a(p,h);var f=t.children;for(var d=0;d<f.length;d++){var y=e(f[d],n);y&&p.appendChild(y)}return p}},function(e,t,n){var r=n(12),a=n(7);function o(e,t,n,r){if(r){var o=r[t];if(a(o))o.unhook&&o.unhook(e,t,n);else if("attributes"===t)for(var i in o)e.removeAttribute(i);else if("style"===t)for(var u in o)e.style[u]="";else e[t]="string"==typeof o?"":null}}function i(e,t,n,a,o){var i=n?n[a]:void 0;if("attributes"!==a)if(i&&r(i)&&u(i)!==u(o))e[a]=o;else{r(e[a])||(e[a]={});var l="style"===a?"":void 0;for(var s in o){var c=o[s];e[a][s]=void 0===c?l:c}}else for(var p in o){var h=o[p];void 0===h?e.removeAttribute(p):e.setAttribute(p,h)}}function u(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__?e.__proto__:e.constructor?e.constructor.prototype:void 0}e.exports=function(e,t,n){for(var u in t){var l=t[u];void 0===l?o(e,u,l,n):a(l)?(o(e,u,l,n),l.hook&&l.hook(e,u,n?n[u]:void 0)):r(l)?i(e,t,n,u,l):e[u]=l}}},function(e,t,n){var r=n(2),a=n(3),o=n(1),i=n(6),u=n(7);e.exports=c;var l={},s=[];function c(e,t,n,r,c){this.tagName=e,this.properties=t||l,this.children=n||s,this.key=null!=r?String(r):void 0,this.namespace="string"==typeof c?c:null;var p,h=n&&n.length||0,f=0,d=!1,y=!1,g=!1;for(var m in t)if(t.hasOwnProperty(m)){var v=t[m];u(v)&&v.unhook&&(p||(p={}),p[m]=v)}for(var b=0;b<h;b++){var S=n[b];a(S)?(f+=S.count||0,!d&&S.hasWidgets&&(d=!0),!y&&S.hasThunks&&(y=!0),g||!S.hooks&&!S.descendantHooks||(g=!0)):!d&&o(S)?"function"==typeof S.destroy&&(d=!0):!y&&i(S)&&(y=!0)}this.count=h+f,this.hasWidgets=d,this.hasThunks=y,this.hooks=p,this.descendantHooks=g}c.prototype.version=r,c.prototype.type="VirtualNode"},function(e,t,n){var r=n(2);function a(e){this.text=String(e)}e.exports=a,a.prototype.version=r,a.prototype.type="VirtualText"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return e[0]===t},a=function(e){return function(e){return"string"==typeof e&&e.length>0}(e)&&(r(e,".")||r(e,"#"))},o=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"];t.default=function(e){var t=function(e){return function(t){return function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return a(n)?e.apply(void 0,[t+n].concat(o)):void 0===n?e(t):e.apply(void 0,[t,n].concat(o))}}}(e),n={TAG_NAMES:o,isSelector:a,createTag:t};return o.forEach(function(e){n[e]=t(e)}),n},e.exports=t.default},function(e,t,n){var r=n(21);e.exports=r},function(e,t,n){var r=n(8),a=n(10),o=n(3),i=n(5),u=n(1),l=n(6),s=n(11),c=n(22);function p(e,t){var n={a:e};return h(e,t,n,0),n}function h(e,t,n,r){if(e!==t){var s=n[r],p=!1;if(l(e)||l(t))d(e,t,n,r);else if(null==t)u(e)||(f(e,n,r),s=n[r]),s=m(s,new a(a.REMOVE,e,t));else if(o(t))if(o(e))if(e.tagName===t.tagName&&e.namespace===t.namespace&&e.key===t.key){var v=c(e.properties,t.properties);v&&(s=m(s,new a(a.PROPS,e,v))),s=function(e,t,n,r,i){for(var u=e.children,l=function(e,t){var n=g(t),r=n.keys,a=n.free;if(a.length===t.length)return{children:t,moves:null};var o=g(e),i=o.keys;if(o.free.length===e.length)return{children:t,moves:null};for(var u=[],l=0,s=a.length,c=0,p=0;p<e.length;p++){var h,f=e[p];f.key?r.hasOwnProperty(f.key)?(h=r[f.key],u.push(t[h])):(h=p-c++,u.push(null)):l<s?(h=a[l++],u.push(t[h])):(h=p-c++,u.push(null))}for(var d=l>=a.length?t.length:a[l],m=0;m<t.length;m++){var v=t[m];v.key?i.hasOwnProperty(v.key)||u.push(v):m>=d&&u.push(v)}for(var b,S=u.slice(),R=0,E=[],T=[],w=0;w<t.length;){var A=t[w];for(b=S[R];null===b&&S.length;)E.push(y(S,R,null)),b=S[R];b&&b.key===A.key?(R++,w++):A.key?(b&&b.key&&r[b.key]!==w+1?(E.push(y(S,R,b.key)),(b=S[R])&&b.key===A.key?R++:T.push({key:A.key,to:w})):T.push({key:A.key,to:w}),w++):b&&b.key&&E.push(y(S,R,b.key))}for(;R<S.length;)b=S[R],E.push(y(S,R,b&&b.key));if(E.length===c&&!T.length)return{children:u,moves:null};return{children:u,moves:{removes:E,inserts:T}}}(u,t.children),s=l.children,c=u.length,p=s.length,f=c>p?c:p,d=0;d<f;d++){var v=u[d],b=s[d];i+=1,v?h(v,b,n,i):b&&(r=m(r,new a(a.INSERT,null,b))),o(v)&&v.count&&(i+=v.count)}l.moves&&(r=m(r,new a(a.ORDER,e,l.moves)));return r}(e,t,n,s,r)}else s=m(s,new a(a.VNODE,e,t)),p=!0;else s=m(s,new a(a.VNODE,e,t)),p=!0;else i(t)?i(e)?e.text!==t.text&&(s=m(s,new a(a.VTEXT,e,t))):(s=m(s,new a(a.VTEXT,e,t)),p=!0):u(t)&&(u(e)||(p=!0),s=m(s,new a(a.WIDGET,e,t)));s&&(n[r]=s),p&&f(e,n,r)}}function f(e,t,n){!function e(t,n,r){if(o(t)){if(t.hooks&&(n[r]=m(n[r],new a(a.PROPS,t,function(e){var t={};for(var n in e)t[n]=void 0;return t}(t.hooks)))),t.descendantHooks||t.hasThunks)for(var i=t.children,u=i.length,s=0;s<u;s++){var c=i[s];e(c,n,r+=1),o(c)&&c.count&&(r+=c.count)}}else l(t)&&d(t,null,n,r)}(e,t,n),function e(t,n,r){if(u(t))"function"==typeof t.destroy&&(n[r]=m(n[r],new a(a.REMOVE,t,null)));else if(o(t)&&(t.hasWidgets||t.hasThunks))for(var i=t.children,s=i.length,c=0;c<s;c++){var p=i[c];e(p,n,r+=1),o(p)&&p.count&&(r+=p.count)}else l(t)&&d(t,null,n,r)}(e,t,n)}function d(e,t,n,r){var o=s(e,t),i=p(o.a,o.b);(function(e){for(var t in e)if("a"!==t)return!0;return!1})(i)&&(n[r]=new a(a.THUNK,null,i))}function y(e,t,n){return e.splice(t,1),{from:t,key:n}}function g(e){for(var t={},n=[],r=e.length,a=0;a<r;a++){var o=e[a];o.key?t[o.key]=a:n.push(a)}return{keys:t,free:n}}function m(e,t){return e?(r(e)?e.push(t):e=[e,t],e):t}e.exports=p},function(e,t,n){var r=n(12),a=n(7);function o(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__?e.__proto__:e.constructor?e.constructor.prototype:void 0}e.exports=function e(t,n){var i;for(var u in t){u in n||((i=i||{})[u]=void 0);var l=t[u],s=n[u];if(l!==s)if(r(l)&&r(s))if(o(s)!==o(l))(i=i||{})[u]=s;else if(a(s))(i=i||{})[u]=s;else{var c=e(l,s);c&&((i=i||{})[u]=c)}else(i=i||{})[u]=s}for(var p in n)p in t||((i=i||{})[p]=n[p]);return i}},function(e,t,n){var r=n(24);e.exports=r},function(e,t,n){var r=n(13),a=n(8),o=n(15),i=n(26),u=n(27);function l(e,t,n){var a=function(e){var t=[];for(var n in e)"a"!==n&&t.push(Number(n));return t}(t);if(0===a.length)return e;var o=i(e,t.a,a),u=e.ownerDocument;n.document||u===r||(n.document=u);for(var l=0;l<a.length;l++){var c=a[l];e=s(e,o[c],t[c],n)}return e}function s(e,t,n,r){if(!t)return e;var o;if(a(n))for(var i=0;i<n.length;i++)o=u(n[i],t,r),t===e&&(e=o);else o=u(n,t,r),t===e&&(e=o);return e}e.exports=function e(t,n,r){r=r||{};r.patch=r.patch&&r.patch!==e?r.patch:l;r.render=r.render||o;return r.patch(t,n,r)}},function(e,t){},function(e,t){var n={};function r(e,t,n){if(0===e.length)return!1;for(var r,a,o=0,i=e.length-1;o<=i;){if(a=e[r=(i+o)/2>>0],o===i)return a>=t&&a<=n;if(a<t)o=r+1;else{if(!(a>n))return!0;i=r-1}}return!1}function a(e,t){return e>t?1:-1}e.exports=function(e,t,o,i){return o&&0!==o.length?(o.sort(a),function e(t,a,o,i,u){i=i||{};if(t){r(o,u,u)&&(i[u]=t);var l=a.children;if(l)for(var s=t.childNodes,c=0;c<a.children.length;c++){u+=1;var p=l[c]||n,h=u+(p.count||0);r(o,u,h)&&e(s[c],p,o,i,u),u=h}}return i}(e,t,o,i,0)):{}}},function(e,t,n){var r=n(16),a=n(1),o=n(10),i=n(28);function u(e,t){"function"==typeof t.destroy&&a(t)&&t.destroy(e)}e.exports=function(e,t,n){var a=e.type,l=e.vNode,s=e.patch;switch(a){case o.REMOVE:return function(e,t){var n=e.parentNode;n&&n.removeChild(e);return u(e,t),null}(t,l);case o.INSERT:return function(e,t,n){var r=n.render(t,n);e&&e.appendChild(r);return e}(t,s,n);case o.VTEXT:return function(e,t,n,r){var a;if(3===e.nodeType)e.replaceData(0,e.length,n.text),a=e;else{var o=e.parentNode;a=r.render(n,r),o&&a!==e&&o.replaceChild(a,e)}return a}(t,0,s,n);case o.WIDGET:return function(e,t,n,r){var a,o=i(t,n);a=o?n.update(t,e)||e:r.render(n,r);var l=e.parentNode;l&&a!==e&&l.replaceChild(a,e);o||u(e,t);return a}(t,l,s,n);case o.VNODE:return function(e,t,n,r){var a=e.parentNode,o=r.render(n,r);a&&o!==e&&a.replaceChild(o,e);return o}(t,0,s,n);case o.ORDER:return function(e,t){for(var n,r,a,o=e.childNodes,i={},u=0;u<t.removes.length;u++)r=t.removes[u],n=o[r.from],r.key&&(i[r.key]=n),e.removeChild(n);for(var l=o.length,s=0;s<t.inserts.length;s++)a=t.inserts[s],n=i[a.key],e.insertBefore(n,a.to>=l++?null:o[a.to])}(t,s),t;case o.PROPS:return r(t,s,l.properties),t;case o.THUNK:return function(e,t){e&&t&&e!==t&&e.parentNode&&e.parentNode.replaceChild(t,e);return t}(t,n.patch(t,s,n));default:return t}}},function(e,t,n){var r=n(1);e.exports=function(e,t){if(r(e)&&r(t))return"name"in e&&"name"in t?e.id===t.id:e.init===t.init;return!1}},function(e,t,n){var r=n(30);e.exports=r},function(e,t,n){"use strict";var r=n(8),a=n(17),o=n(18),i=n(3),u=n(5),l=n(1),s=n(7),c=n(6),p=n(31),h=n(33),f=n(34);function d(e){return i(e)||u(e)||l(e)||c(e)}function y(e){try{return JSON.stringify(e,null,"    ")}catch(t){return String(e)}}e.exports=function(e,t,n){var i,u,l,c,g=[];!n&&(m=t,"string"==typeof m||r(m)||d(m))&&(n=t,u={});var m;i=p(e,u=u||t||{}),u.hasOwnProperty("key")&&(l=u.key,u.key=void 0);u.hasOwnProperty("namespace")&&(c=u.namespace,u.namespace=void 0);"INPUT"!==i||c||!u.hasOwnProperty("value")||void 0===u.value||s(u.value)||(u.value=h(u.value));(function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if(s(n))continue;"ev-"===t.substr(0,3)&&(e[t]=f(n))}})(u),null!=n&&function e(t,n,a,i){if("string"==typeof t)n.push(new o(t));else if("number"==typeof t)n.push(new o(String(t)));else if(d(t))n.push(t);else{if(!r(t)){if(null==t)return;throw l={foreignObject:t,parentVnode:{tagName:a,properties:i}},(s=new Error).type="virtual-hyperscript.unexpected.virtual-element",s.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+y(l.foreignObject)+".\nThe parent vnode is:\n"+y(l.parentVnode),s.foreignObject=l.foreignObject,s.parentVnode=l.parentVnode,s}for(var u=0;u<t.length;u++)e(t[u],n,a,i)}var l,s}(n,g,i,u);return new a(i,u,g,l,c)}},function(e,t,n){"use strict";var r=n(32),a=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,o=/^\.|#/;e.exports=function(e,t){if(!e)return"DIV";var n,i,u,l,s=!t.hasOwnProperty("id"),c=r(e,a),p=null;o.test(c[1])&&(p="DIV");for(l=0;l<c.length;l++)(i=c[l])&&(u=i.charAt(0),p?"."===u?(n=n||[]).push(i.substring(1,i.length)):"#"===u&&s&&(t.id=i.substring(1,i.length)):p=i);n&&(t.className&&n.push(t.className),t.className=n.join(" "));return t.namespace?p:p.toUpperCase()}},function(e,t){var n,r,a;
/*!
 * Cross-Browser Split 1.1.1
 * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>
 * Available under the MIT License
 * ECMAScript compliant, uniform cross-browser split method
 */
e.exports=(r=String.prototype.split,a=/()??/.exec("")[1]===n,function(e,t,o){if("[object RegExp]"!==Object.prototype.toString.call(t))return r.call(e,t,o);var i,u,l,s,c=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),h=0;for(t=new RegExp(t.source,p+"g"),e+="",a||(i=new RegExp("^"+t.source+"$(?!\\s)",p)),o=o===n?-1>>>0:o>>>0;(u=t.exec(e))&&!((l=u.index+u[0].length)>h&&(c.push(e.slice(h,u.index)),!a&&u.length>1&&u[0].replace(i,function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===n&&(u[e]=n)}),u.length>1&&u.index<e.length&&Array.prototype.push.apply(c,u.slice(1)),s=u[0].length,h=l,c.length>=o));)t.lastIndex===u.index&&t.lastIndex++;return h===e.length?!s&&t.test("")||c.push(""):c.push(e.slice(h)),c.length>o?c.slice(0,o):c})},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.value=e}e.exports=r,r.prototype.hook=function(e,t){e[t]!==this.value&&(e[t]=this.value)}},function(e,t,n){"use strict";var r=n(35);function a(e){if(!(this instanceof a))return new a(e);this.value=e}e.exports=a,a.prototype.hook=function(e,t){r(e)[t.substr(3)]=this.value},a.prototype.unhook=function(e,t){r(e)[t.substr(3)]=void 0}},function(e,t,n){"use strict";n(36)("ev-store","7");var r="__EV_STORE_KEY@7";e.exports=function(e){var t=e[r];t||(t=e[r]={});return t}},function(e,t,n){"use strict";var r=n(37);e.exports=function(e,t,n){var a="__INDIVIDUAL_ONE_VERSION_"+e,o=r(a+"_ENFORCE_SINGLETON",t);if(o!==t)throw new Error("Can only have one copy of "+e+".\nYou already have version "+o+" installed.\nThis means you cannot install version "+t);return r(a,n)}},function(e,t,n){"use strict";(function(t){var n="undefined"!=typeof window?window:void 0!==t?t:{};e.exports=function(e,t){if(e in n)return n[e];return n[e]=t,t}}).call(this,n(14))},function(e,t,n){"use strict";n.r(t);var r=function(){return!1};var a={battleText:[],enemy:"",cleanBattleText:r,inBattle:r,initiative:r,enemySleep:0,enemyStop:r,playerSleep:r,playerStop:r,sleepCount:6,critHit:r,player:{name:"Rollo",nameSum:0,progression:0,level:1,strength:4,agility:4,hp:15,maxhp:15,mp:0,weapon:{name:"Unarmed",mod:0},armor:{name:"Naked",mod:0},shield:{name:"Naked",mod:0},herbCount:0}};function o(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function i(e){return function t(n){return 0===arguments.length||o(n)?t:e.apply(this,arguments)}}function u(e){return function t(n,r){switch(arguments.length){case 0:return t;case 1:return o(n)?t:i(function(t){return e(n,t)});default:return o(n)&&o(r)?t:o(n)?i(function(t){return e(t,r)}):o(r)?i(function(t){return e(n,t)}):e(n,r)}}}function l(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function s(e,t,n){for(var r=0,a=n.length;r<a;){if(e(t,n[r]))return!0;r+=1}return!1}function c(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var p="function"==typeof Object.is?Object.is:function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},h=Object.prototype.toString,f=function(){return"[object Arguments]"===h.call(arguments)?function(e){return"[object Arguments]"===h.call(e)}:function(e){return c("callee",e)}}(),d=!{toString:null}.propertyIsEnumerable("toString"),y=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],g=function(){return arguments.propertyIsEnumerable("length")}(),m=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},v="function"!=typeof Object.keys||g?i(function(e){if(Object(e)!==e)return[];var t,n,r=[],a=g&&f(e);for(t in e)!c(t,e)||a&&"length"===t||(r[r.length]=t);if(d)for(n=y.length-1;n>=0;)c(t=y[n],e)&&!m(r,t)&&(r[r.length]=t),n-=1;return r}):i(function(e){return Object(e)!==e?[]:Object.keys(e)}),b=i(function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)});function S(e,t,n,r){var a=l(e);function o(e,t){return R(e,t,n.slice(),r.slice())}return!s(function(e,t){return!s(o,t,e)},l(t),a)}function R(e,t,n,r){if(p(e,t))return!0;var a,o,i=b(e);if(i!==b(t))return!1;if(null==e||null==t)return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(i){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===(a=e.constructor,null==(o=String(a).match(/^function (\w*)/))?"":o[1]))return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!p(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!p(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1}for(var u=n.length-1;u>=0;){if(n[u]===e)return r[u]===t;u-=1}switch(i){case"Map":return e.size===t.size&&S(e.entries(),t.entries(),n.concat([e]),r.concat([t]));case"Set":return e.size===t.size&&S(e.values(),t.values(),n.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var l=v(e);if(l.length!==v(t).length)return!1;var s=n.concat([e]),h=r.concat([t]);for(u=l.length-1;u>=0;){var f=l[u];if(!c(f,t)||!R(t[f],e[f],s,h))return!1;u-=1}return!0}var E=u(function(e,t){return R(e,t,[],[])}),T=function(){return!0};function w(e){return function t(n,r,a){switch(arguments.length){case 0:return t;case 1:return o(n)?t:u(function(t,r){return e(n,t,r)});case 2:return o(n)&&o(r)?t:o(n)?u(function(t,n){return e(t,r,n)}):o(r)?u(function(t,r){return e(n,t,r)}):i(function(t){return e(n,r,t)});default:return o(n)&&o(r)&&o(a)?t:o(n)&&o(r)?u(function(t,n){return e(t,n,a)}):o(n)&&o(a)?u(function(t,n){return e(t,r,n)}):o(r)&&o(a)?u(function(t,r){return e(n,t,r)}):o(n)?i(function(t){return e(t,r,a)}):o(r)?i(function(t){return e(n,t,a)}):o(a)?i(function(t){return e(n,r,t)}):e(n,r,a)}}}var A=w(function(e,t,n){var r={};for(var a in n)r[a]=n[a];return r[e]=t,r}),x=w(function(e,t,n){return E(t,n[e])});function k(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,a){return t.apply(this,arguments)};case 5:return function(e,n,r,a,o){return t.apply(this,arguments)};case 6:return function(e,n,r,a,o,i){return t.apply(this,arguments)};case 7:return function(e,n,r,a,o,i,u){return t.apply(this,arguments)};case 8:return function(e,n,r,a,o,i,u,l){return t.apply(this,arguments)};case 9:return function(e,n,r,a,o,i,u,l,s){return t.apply(this,arguments)};case 10:return function(e,n,r,a,o,i,u,l,s,c){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function N(e,t){return function(){return t.call(this,e.apply(this,arguments))}}var O=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};function _(e){return"[object String]"===Object.prototype.toString.call(e)}var C=i(function(e){return!!O(e)||!!e&&("object"==typeof e&&(!_(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&(e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1)))))}),H=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}();var P=u(function(e,t){return k(e.length,function(){return e.apply(t,arguments)})});function M(e,t,n){for(var r=n.next();!r.done;){if((t=e["@@transducer/step"](t,r.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=n.next()}return e["@@transducer/result"](t)}function L(e,t,n,r){return e["@@transducer/result"](n[r](P(e["@@transducer/step"],e),t))}var D="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function B(e,t,n){if("function"==typeof e&&(e=function(e){return new H(e)}(e)),C(n))return function(e,t,n){for(var r=0,a=n.length;r<a;){if((t=e["@@transducer/step"](t,n[r]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}(e,t,n);if("function"==typeof n["fantasy-land/reduce"])return L(e,t,n,"fantasy-land/reduce");if(null!=n[D])return M(e,t,n[D]());if("function"==typeof n.next)return M(e,t,n);if("function"==typeof n.reduce)return L(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var G=w(B);function U(e,t){return function(){var n=arguments.length;if(0===n)return t();var r=arguments[n-1];return O(r)||"function"!=typeof r[e]?t.apply(this,arguments):r[e].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}var j=i(U("tail",w(U("slice",function(e,t,n){return Array.prototype.slice.call(n,e,t)}))(1,1/0)));function $(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return k(arguments[0].length,G(N,arguments[0],j(arguments)))}var W=w(function(e,t,n){return e(n)?t(n):n}),I=u(function(e,t){return null!=t&&t.constructor===e||t instanceof e}),V=w(function(e,t,n){return I(e,n[t])}),F=u(function e(t,n){var r,a,o,i=n instanceof Array?[]:{};for(a in n)o=typeof(r=t[a]),i[a]="function"===o?r(n[a]):r&&"object"===o?e(r,n[a]):n[a];return i});function Y(e,t){var n;t=t||[];var r=(e=e||[]).length,a=t.length,o=[];for(n=0;n<r;)o[o.length]=e[n],n+=1;for(n=0;n<a;)o[o.length]=t[n],n+=1;return o}var K=u(function(e,t){return Y(t,[e])}),q=u(function(e,t){return e>t});var z=u(function(e,t){return 1===e?i(t):k(e,function e(t,n,r){return function(){for(var a=[],i=0,u=t,l=0;l<n.length||i<arguments.length;){var s;l<n.length&&(!o(n[l])||i>=arguments.length)?s=n[l]:(s=arguments[i],i+=1),a[l]=s,o(s)||(u-=1),l+=1}return u<=0?r.apply(this,a):k(u,e(t,a,r))}}(e,[],t))}),X=w(function(e,t,n){return z(Math.max(e.length,t.length,n.length),function(){return e.apply(this,arguments)?t.apply(this,arguments):n.apply(this,arguments)})});const J=X(E(Math.floor(2*Math.random())),r,T),Q=e=>e.charAt(0).toUpperCase()+e.slice(1),Z=e=>{const[t,n]=e;return Math.floor(Math.random()*(n-t+1)+t)},ee=(e,t)=>{const n=e.maxhp-e.hp,r=Z(t);return n<r?n:r},te=A("battleText",[]),ne=A("cleanBattleText",r),re=x("cleanBattleText",T),ae=$(te,ne),oe=W(re,ae),ie=V(Object,"enemy"),ue=F({battleText:K("Please choose an enemy!"),cleanBattleText:T,initiative:r}),le=(e,t=1)=>e*Z([0,255])*t;function se(e){const{player:t,enemy:n}=e;return q(le(t.agility),le(n.agility,.25))}const ce=W(I(Array),Z);const pe=X(ie,function(e){const{enemy:t,player:n}=e,{hp:r}=t,a=ce(r);return F({player:A("hp",n.maxhp),enemy:$(A("hp",a),A("maxhp",a)),inBattle:T,battleText:K(`You are fighting the ${e.enemy.name}`),initiative:se(e)},e)},ue);var he=$(oe,pe);var fe=u(function(e,t){return e&&t});function de(e,t,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),a=r.pop();if(!O(a)){for(var o=0;o<e.length;){if("function"==typeof a[e[o]])return a[e[o]].apply(a,r);o+=1}if(function(e){return null!=e&&"function"==typeof e["@@transducer/step"]}(a))return t.apply(null,r)(a)}return n.apply(this,arguments)}}var ye=function(){return this.xf["@@transducer/init"]()},ge=function(e){return this.xf["@@transducer/result"](e)},me=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=ye,e.prototype["@@transducer/result"]=ge,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},e}(),ve=u(de(["fantasy-land/map","map"],u(function(e,t){return new me(e,t)}),function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return z(t.length,function(){return e.call(this,t.apply(this,arguments))});case"[object Object]":return B(function(n,r){return n[r]=e(t[r]),n},{},v(t));default:return function(e,t){for(var n=0,r=t.length,a=Array(r);n<r;)a[n]=e(t[n]),n+=1;return a}(e,t)}})),be=u(function(e,t){return"function"==typeof t["fantasy-land/ap"]?t["fantasy-land/ap"](e):"function"==typeof e.ap?e.ap(t):"function"==typeof e?function(n){return e(n)(t(n))}:B(function(e,n){return Y(e,ve(n,t))},[],e)}),Se=u(function(e,t){var n=z(e,t);return z(e,function(){return B(be,ve(n,arguments[0]),Array.prototype.slice.call(arguments,1))})}),Re=i(function(e){return Se(e.length,e)}),Ee=u(function(e,t){return n=e,"[object Function]"===Object.prototype.toString.call(n)?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:Re(fe)(e,t);var n}),Te=u(function(e,t){return Number(e)+Number(t)})(-1),we=u(function(e,t){return e||t}),Ae=i(function(e){return!e}),xe=u(function(e,t){return e<t});const ke=E(Z([1,32]),1),Ne=e=>Z([1,64])<=e,Oe=e=>Z([1,16])<=e?T:r,_e=(e,t)=>(e-t/2)/4,Ce=(e,t)=>(e-t/2)/2,He=(e,t)=>[_e(e,t),Ce(e,t)],Pe=e=>e/2,Me=e=>e,Le=e=>[Pe(e),Me(e)],De=[.25,.375,.75,1],Be=F({battleText:K("You are still asleep!"),sleepCount:Te()}),Ge=F({battleText:K("You wake up!"),playerSleep:r}),Ue=X(e=>Ee(J,(e=>e.sleepCount>0)(e)),Be,Ge);function je(e,t){const n=W(x("playerSleep",T),Ue)(e);if(console.log("Checking sleep"),console.log(n),E(n.playerSleep,T))return n;switch(t.type){case"CAST_HEAL":case"CAST_HEALMORE":case"CAST_HURT":case"CAST_HURTMORE":case"CAST_SLEEP":case"CAST_STOPSPELL":return function(e,t){switch(console.log(e),e.type){case"CAST_HEAL":return We(t,!1);case"CAST_HEALMORE":return We(t,!0);case"CAST_HURT":return Ie(t,!1);case"CAST_HURTMORE":return Ie(t,!0);case"CAST_SLEEP":return function(e){const{enemy:t,player:n,playerStop:r}=e,{mp:a}=n,{sleepR:o}=t,i=[...e.battleText];if(a<2)return i.push("Player tries to cast Sleep, but doesn't have enough MP!"),{...e,battleText:i};const u=a-2,l={...n,mp:u};if(r)return i.push("Player casts Sleep! But their magic has been sealed!"),{...e,player:l,battleText:i};if(i.push("Player casts Sleep!"),e.enemySleep)return i.push(`But the ${t.name} is already asleep!`),{...e,player:l,battleText:i};const s=Oe(o);if(E(s,T))return i.push(`But the ${t.name} resisted!`),{...e,player:l,battleText:i};i.push(` ${Q(t.name)} is now asleep!`);const c=we(e.enemySleep,2);return{...e,player:l,battleText:i,enemySleep:c}}(t);case"CAST_STOPSPELL":return function(e){const{enemy:t,player:n,enemyStop:r,playerStop:a}=e,{mp:o}=n,{stopR:i}=t,u=[...e.battleText];if(o<2)return u.push("Player tries to cast Stopspell, but doesn't have enough MP!"),{...e,battleText:u};const l=o-2,s={...n,mp:l};if(a)return u.push("Player casts Stopspell! But their magic has been sealed!"),{...e,player:s,battleText:u};if(u.push("Player casts Stopspell!"),r)return u.push(`But the ${t.name}'s magic is already blocked!`),{...e,player:s,battleText:u};const c=Oe(i);if(E(c,T))return u.push(`But the ${t.name} resisted!`),{...e,player:s,battleText:u};u.push(` ${Q(t.name)}'s magic is now blocked!`);const p=T;return{...e,player:s,battleText:u,enemyStop:p}}(t);default:return console.log("Spell fell through switchblock!"),t}}(t,n);case"FIGHT":return function(e){const{player:t,enemy:n}=e,a=Ne(n.dodge),o=ke,i=function(e,t,n,r){if(r)return 0;const a=e.strength+e.weapon.mod,o=t.agility;if(n){const e=Z(Le(a));return $e(e)}return $e(Z(He(a,o)))}(t,n,o,a),u={...n,hp:n.hp-i};return function(e,t,n,a){const{enemy:o,battleText:i}=e;fe(n,Ae(o.voidCrit))?i.push("Player attacks with an excellent attack!!"):i.push("Player attacks!");if(a)return i.push(`But the ${o.name} dodged your attack!`),{...e,battleText:i};if(i.push(`Player hits ${o.name} for ${t} points of damage.`),o.hp<=0)return i.push(`You have defeated the ${o.name}!`),{...e,battleText:i,inBattle:r};return{...e,battleText:i}}({...e,enemy:u},i,o,a)}(n);case"USE_HERB":return function(e){const{player:t}=e,n=ee(t,[23,30]),r=E(n,0)?K("Player eats a healing herb. But their hit points were already at maximum!",e.battleText):K(`Player eats a healing herb. Player is healed ${n} hit points`,e.battleText),a={...t,hp:t.hp+n,herbCount:Te(t.herbCount)};return{...e,player:a,battleText:r}}(n);case"RUN_AWAY":return function(e){const{player:t,enemy:n}=e,a=t.agility,o=n.agility,i=Z([0,255]),u=Z([0,255]),l=De[n.run],s=[...e.battleText];s.push("You try to run away...");const c=q(a*i,o*u*l);if(we(c,E(e.enemySleep,T)))return s.push("You succeed in fleeing!"),{...e,inBattle:r,battleText:s};return s.push("...but the enemy blocks you from running away!"),{...e,battleText:s}}(n);default:return e}}function $e(e){if(e<1){const e=J();return E(e,T)?0:1}return e}function We(e,t){const n=[...e.battleText],{player:r,playerStop:a}=e,{mp:o,hp:i}=r,u=t?"Healmore":"Heal";if(we(fe(xe(o,4),Ae(t))),fe(xe(o,10),t))return{...e,battleText:K(`Player tries to cast ${u}, but doesn't have enough MP!`,n)};const l=t?o-10:o-4;if(a){n.push(`Player casts ${u}! But their magic has been sealed!`);const t={...e.player,mp:l};return{...e,player:t,battleText:n}}const s=ee(r,t?[85,100]:[10,17]),c=i+s;E(s,0)?n.push(`Player casts ${u}! But their hit points were already at maximum!`):n.push(`Player casts ${u}! Player is healed ${s} hit points`);const p={...e.player,hp:c,mp:l};return{...e,player:p,battleText:n}}function Ie(e,t){const{enemy:n,player:a,playerStop:o}=e,{hp:i,hurtR:u}=n,{mp:l}=a,s=t?"Hurtmore":"Hurt";if(we(fe(xe(l,2),Ae(t))),fe(xe(l,5),t)){const t=[...e.battleText,`Player tries to cast ${s}, but doesn't have enough MP!`];return{...e,battleText:t}}const c=t?l-5:l-2,p={...a,mp:c};if(o)return{...e,player:p,battleText:K(`Player casts ${s}! But their magic has been sealed!`,e.battleText)};const h=Z(t?[58,65]:[5,12]),f=i-h,d=[...e.battleText];d.push("Player casts Hurt!");const y=Oe(u);if(E(y,T))return d.push(`But the ${n.name} resisted!`),{...e,player:p,battleText:d};d.push(` ${Q(n.name)} is hurt by ${h} hit points`);const g=f<=0?r:T,m={...n,hp:f};return f<=0&&d.push(`You have defeated the ${Q(n.name)}`),{...e,enemy:m,player:p,battleText:d,inBattle:g}}var Ve=u(function(e,t){return t>e?t:e}),Fe=i(function(e){return k(G(Ve,0,ve(function(e){return e[0].length},e)),function(){for(var t=0;t<e.length;){if(e[t][0].apply(this,arguments))return e[t][1].apply(this,arguments);t+=1}})}),Ye=i(function(e){return _(e)?e.split("").reverse().join(""):Array.prototype.slice.call(e,0).reverse()});function Ke(){if(0===arguments.length)throw new Error("compose requires at least one argument");return $.apply(this,Ye(arguments))}var qe=u(function(e,t){for(var n=t,r=0;r<e.length;){if(null==n)return;n=n[e[r]],r+=1}return n}),ze=u(function(e,t){return qe([e],t)}),Xe=u(function(e,t){return e>=t});const Je=e=>(e+4)/6,Qe=e=>[0,Je(e)],Ze=(e,t)=>(e-t/2)/4,et=(e,t)=>(e-t/2)/2,tt=(e,t)=>[Ze(e,t),et(e,t)],nt=e=>e.reduce((e,t)=>e+t.weight,0);function rt(e){return Fe([[at,ut],[ot,it],[T,yt]])(e)}function at(e){return Ke(xe(0),ze("enemySleep"))(e)}function ot(e){return fe(Xe(e.player.strength,2*e.enemy.strength),E(Z([1,4]),4))}function it(e){return console.log("Running!"),{...e,battleText:K("The enemy flees from your superior strength!",e.battleText),enemySleep:0,inBattle:r}}function ut(e){return Fe([[Ke(E(2),ze("enemySleep")),lt],[st,ct],[T,pt]])(e)}function lt(e){return{...e,battleText:K(`The ${e.enemy.name} is asleep.`,e.battleText),enemySleep:1}}function st(){return E(Z([1,3]),3)}function ct(e){return yt({...e,battleText:K(`The ${e.enemy.name} woke up!`,e.battleText),enemySleep:0})}function pt(e){return{...e,battleText:K(`The ${e.enemy.name} is still asleep...`,e.battleText)}}const ht=E,ft=e=>E(e.playerSleep,r)?T:r,dt=e=>E(e.playerStop,r)?T:r;function yt(e,t){const{enemy:n}=e,a=we(t,n.pattern),o=a.find(function(e){let t=Math.floor(Math.random()*(e+1));return function(e){return(t-=e.weight)<=0}}(nt(a))).id;return console.log("Chosen attack is..."),console.log(o),Fe([[ht("ATTACK"),()=>(function(e){const{player:t,enemy:n}=e,a=function(e,t){const n=t.strength,r=Math.floor((e.agility+e.armor.mod+e.shield.mod)/2);if(Xe(r,n))return Z(Qe(n));return Z(tt(n,r))}(t,n),o={...t,hp:t.hp-a};return function(e,t){const{player:n,enemy:a,battleText:o}=e;if(o.push(`${Q(a.name)} attacks! ${Q(a.name)} hits you for ${t} points of damage`),n.hp<=0)return o.push(`You have been defeated by the ${a.name}!`),{...e,battleText:o,inBattle:r};return{...e,battleText:o}}({...e,player:o},a)})(e)],[ht("HURT"),()=>bt(e,!1)],[ht("HURTMORE"),()=>bt(e,!0)],[ht("HEAL"),()=>(function(e,t,n){return X(mt,()=>St(t,e),()=>vt(n,e))(e)})(e,!1,a)],[ht("HEALMORE"),()=>X(mt(e),St(e,!0),vt(e,a))],[ht("SLEEP"),()=>X(ft(e),function(e){const{enemy:t,enemyStop:n}=e,r=[...e.battleText];if(r.push(`The ${t.name} casts Sleep!`),n)return r.push(`However, ${Q(t.name)}'s magic is blocked!`),{...e,battleText:r};return r.push("You fall asleep!"),{...e,battleText:r,playerSleep:T}}(e),function(e,t){const n=t.filter(e=>"SLEEP"!==e.id);return yt(e,n)}(e,a))],[ht("STOPSPELL"),()=>X(dt(e),function(e){const{enemy:t,enemyStop:n}=e,r=[...e.battleText];if(r.push(`The ${t.name} casts Stopspell!`),n)return r.push(`However, ${Q(t.name)}'s magic is blocked!`),{...e,battleText:r};if(J())return r.push("Your magic has been blocked!"),{...e,battleText:r,playerBlock:T};return r.push("But the spell fails!"),{...e,battleText:r}}(e),function(e,t){const n=t.filter(e=>"STOPSPELL"!==e.id);return yt(e,n)}(e,a))],[ht("FIRE"),()=>Rt(e,!1)],[ht("STRONGFIRE"),()=>Rt(e,!0)],[T,()=>console.log("Enemy Round Went Wrong!")]])(o)}const gt=e=>e.enemy.hp/e.enemy.maxhp;function mt(e){return Ke(q(.25),gt)(e)}function vt(e,t){return yt(t,e.filter(e=>"HEAL"!==e.id&&"HEALMORE"!==e.id))}function bt(e,t){const n=t?"Hurtmore":"Hurt",{enemy:a,player:o,enemyStop:i}=e;console.log("Stopped is"),console.log(i);const{hp:u,armor:l}=o,s=l.magDef,c=Z(t?s?[20,30]:[30,45]:s?[2,6]:[3,10]),p=u-c,h=[...e.battleText];if(h.push(`${Q(a.name)} casts ${n}!`),E(i,T))return h.push(`However, ${Q(a.name)}'s magic is blocked!`),{...e,battleText:h};h.push(` Player is hurt by ${c} hit points.`);const f=p<=0?r:T,d={...o,hp:p};return p<=0&&h.push(`You have been defeated by the ${Q(a.name)}.`),{...e,player:d,battleText:h,inBattle:f}}function St(e,t){const{enemy:n,enemyStop:r}=t,{hp:a,maxhp:o}=n,i=e?"Healmore":"Heal",u=o-a,l=Z(e?[85,100]:[20,27]),s=u<l?u:l,c=[...t.battleText];if(c.push(`${Q(n.name)} casts ${i}!`),E(r,T))return c.push(`However, ${Q(n.name)}'s magic is blocked!`),{...t,battleText:c};const p=a+s;c.push(`${Q(n.name)} is healed ${s} hit points`);const h={...t.enemy,hp:p};return{...t,enemy:h,battleText:c}}function Rt(e,t){const{enemy:n,player:a}=e,{hp:o,armor:i}=a,u=t?"strong flames at you!":"fire",l=i.fireDef,s=Z(t?l?[42,48]:[65,72]:l?[10,14]:[16,23]),c=o-s,p=[...e.battleText];p.push(`${Q(n.name)} breathes ${u}!`),p.push(` Player is hurt by ${s} hit points.`);const h=c<=0?r:T,f={...a,hp:c};return c<=0&&p.push(`You have been defeated by the ${Q(n.name)}.`),{...e,player:f,battleText:p,inBattle:h}}const Et={Unarmed:{name:"Unarmed",mod:0},"Bamboo Pole":{name:"Bamboo Pole",mod:2},Club:{name:"Club",mod:4},"Copper Sword":{name:"Copper Sword",mod:10},"Hand Axe":{name:"Hand Axe",mod:15},"Broad Sword":{name:"Broad Sword",mod:20},"Flame Sword":{name:"Flame Sword",mod:28},"Erdrick's Sword":{name:"Erdrick's Sword",mod:40}},Tt={Naked:{name:"Naked",mod:0},Clothes:{name:"Clothes",mod:2},"Leather Armor":{name:"Leather Armor",mod:4},"Chain Mail":{name:"Chain Mail",mod:10},"Half Plate":{name:"Half Plate",mod:16},"Full Plate":{name:"Full Plate",mod:24},"Magic Armor":{name:"Magic Armor",mod:24,magDef:T},"Erdrick's Armor":{name:"Erdrick's Armor",mod:28,magDef:T,fireDef:T}},wt={Naked:{name:"Naked",mod:0},"Small Shield":{name:"Small Shield",mod:4},"Large Shield":{name:"Large Shield",mod:10},"Silver Shield":{name:"Silver Shield",mod:25}};function At(e,t){const{weapon:n}=e;return{...t.player,weapon:Et[n]}}function xt(e,t){const{armor:n}=e;return{...t.player,armor:Tt[n]}}function kt(e,t){const{shield:n}=e;return{...t.player,shield:wt[n]}}const Nt={1:[4,4,15,0],2:[5,4,22,0],3:[7,6,24,5],4:[7,8,31,16],5:[12,10,35,20],6:[16,10,38,24],7:[18,17,40,26],8:[22,20,46,29],9:[30,22,50,36],10:[35,31,54,40],11:[40,35,62,50],12:[48,40,63,58],13:[52,48,70,64],14:[60,55,78,70],15:[68,64,86,72],16:[72,70,92,95],17:[72,78,100,100],18:[85,84,115,108],19:[87,86,130,115],20:[92,88,138,128],21:[95,90,149,135],22:[97,90,158,146],23:[99,94,165,153],24:[103,98,170,161],25:[113,100,174,161],26:[117,105,180,168],27:[125,107,189,175],28:[130,115,195,180],29:[135,120,200,190],30:[140,130,210,200]},Ot=(e,t)=>e+t,_t=(e,t)=>Math.floor(.9*t+Math.floor(e/4)%4);function Ct(e,t,n){return 0===t?function(e,t){const[n,r,a,o]=t;return $(K(_t(e,n)),K(_t(e,r)),K(a),K(o))([])}(e,n):1===t?function(e,t){const[n,r,a,o]=t;return $(K(n),K(_t(e,r)),K(a),K(_t(e,o)))([])}(e,n):2===t?function(e,t){const[n,r,a,o]=t;return $(K(_t(e,n)),K(r),K(_t(e,a)),K(o))([])}(e,n):3===t?function(e,t){const[n,r,a,o]=t;return $(K(n),K(r),K(_t(e,a)),K(_t(e,o)))([])}(e,n):console.log("Invalid progression var in statsCalc")}function Ht(e){const{player:t}=e,{nameSum:n,progression:r,level:a}=t,o=Ct(n,r,Nt[a]),[i,u,l,s]=o;return $(A("strength",i),A("agility",u),A("hp",l),A("maxhp",l),A("mp",s))(t)}function Pt(e,t){const{name:n}=e,{player:r}=t,a=n.split("").slice(0,4).map(e=>q("gwM".indexOf(e),-1)?0:q("hxN".indexOf(e),-1)?1:q("iyO".indexOf(e),-1)?2:q("jzP".indexOf(e),-1)?3:q("kAQ".indexOf(e),-1)?4:q("lBR".indexOf(e),-1)?5:q("mCS".indexOf(e),-1)?6:q("nDT".indexOf(e),-1)?7:q("oEU".indexOf(e),-1)?8:q("pFV".indexOf(e),-1)?9:q("aqGW".indexOf(e),-1)?10:q("brHX".indexOf(e),-1)?11:q("csIY".indexOf(e),-1)?12:q("dtJZ".indexOf(e),-1)?13:q("euK".indexOf(e),-1)?14:q("fvL".indexOf(e),-1)?15:0).reduce(Ot);return{...r,name:n,nameSum:a,progression:Math.floor(a%4)}}const Mt="ATTACK",Lt="HURT",Dt="HURTMORE",Bt="HEAL",Gt="HEALMORE",Ut="SLEEP",jt="STOPSPELL",$t="FIRE",Wt={Slime:{name:"Slime",strength:5,agility:3,hp:3,sleepR:0,stopR:15,hurtR:0,dodge:1,pattern:[{id:Mt,weight:100}],run:0},"Red Slime":{name:"Red Slime",strength:7,agility:3,hp:3,sleepR:0,stopR:15,hurtR:0,dodge:1,pattern:[{id:Mt,weight:100}],run:0},Drakee:{name:"Drakee",strength:9,agility:6,hp:[5,6],sleepR:0,stopR:15,hurtR:0,dodge:1,pattern:[{id:Mt,weight:100}],run:0},Ghost:{name:"Ghost",strength:11,agility:8,hp:[6,7],sleepR:0,stopR:15,hurtR:0,dodge:4,pattern:[{id:Mt,weight:100}],run:0},Magician:{name:"Magician",strength:11,agility:12,hp:[10,13],sleepR:0,stopR:0,hurtR:0,dodge:1,pattern:[{id:Mt,weight:50},{id:Lt,weight:50}],run:0},Magidrakee:{name:"Magidrakee",strength:14,agility:14,hp:[12,15],sleepR:0,stopR:0,hurtR:0,dodge:1,pattern:[{id:Mt,weight:50},{id:Lt,weight:50}],run:0},Scorpion:{name:"Scorpion",strength:18,agility:16,hp:[16,20],sleepR:0,stopR:15,hurtR:0,dodge:1,pattern:[{id:Mt,weight:100}],run:0},Druin:{name:"Druin",strength:20,agility:18,hp:[17,22],sleepR:0,stopR:15,hurtR:0,dodge:2,pattern:[{id:Mt,weight:100}],run:0},Poltergeist:{name:"Poltergeist",strength:18,agility:20,hp:[18,23],sleepR:0,stopR:0,hurtR:0,dodge:6,pattern:[{id:Mt,weight:25},{id:Lt,weight:75}],run:0},Droll:{name:"Droll",strength:24,agility:24,hp:[19,25],sleepR:0,stopR:14,hurtR:0,dodge:2,pattern:[{id:Mt,weight:100}],run:0},Drakeema:{name:"Drakeema",strength:22,agility:26,hp:[16,20],sleepR:2,stopR:0,hurtR:0,dodge:6,pattern:[{id:Bt,weight:25},{id:Lt,weight:50},{id:Mt,weight:25}],run:0},Skeleton:{name:"Skeleton",strength:28,agility:22,hp:[16,20],sleepR:0,stopR:15,hurtR:0,dodge:4,pattern:[{id:Mt,weight:100}],run:0},Warlock:{name:"Warlock",strength:28,agility:22,hp:[23,30],sleepR:3,stopR:1,hurtR:0,dodge:2,pattern:[{id:Ut,weight:25},{id:Lt,weight:50},{id:Mt,weight:50}],run:0},"Metal Scorpion":{name:"Metal Scorpion",strength:36,agility:42,hp:[17,22],sleepR:0,stopR:15,hurtR:0,dodge:2,pattern:[{id:Mt,weight:100}],run:0},Wolf:{name:"Wolf",strength:40,agility:30,hp:[26,34],sleepR:1,stopR:15,hurtR:0,dodge:2,pattern:[{id:Mt,weight:100}],run:0},Wraith:{name:"Wraith",strength:44,agility:34,hp:[26,34],sleepR:7,stopR:0,hurtR:0,dodge:4,pattern:[{id:Bt,weight:25},{id:Mt,weight:75}],run:0},"Metal Slime":{name:"Metal Slime",strength:10,agility:255,hp:4,sleepR:15,stopR:15,hurtR:15,dodge:1,pattern:[{id:Lt,weight:75},{id:Mt,weight:25}],run:0},Specter:{name:"Specter",strength:40,agility:38,hp:[28,36],sleepR:3,stopR:1,hurtR:0,dodge:4,pattern:[{id:Ut,weight:25},{id:Lt,weight:75},{id:Mt,weight:25}],run:0},Wolflord:{name:"Wolflord",strength:50,agility:36,hp:[29,38],sleepR:4,stopR:7,hurtR:0,dodge:2,pattern:[{id:jt,weight:50},{id:Mt,weight:50}],run:0},Druinlord:{name:"Druinlord",strength:47,agility:40,hp:[27,35],sleepR:15,stopR:0,hurtR:0,dodge:4,pattern:[{id:Bt,weight:75},{id:Mt,weight:75},{id:Lt,weight:25}],run:0},Drollmagi:{name:"Drollmagi",strength:52,agility:50,hp:[29,38],sleepR:2,stopR:2,hurtR:0,dodge:1,pattern:[{id:jt,weight:50},{id:Mt,weight:50}],run:1},Wyvern:{name:"Wyvern",strength:56,agility:48,hp:[32,42],sleepR:4,stopR:15,hurtR:0,dodge:2,pattern:[{id:Mt,weight:100}],run:1},"Rogue Scorpion":{name:"Rogue Scorpion",strength:60,agility:90,hp:[27,35],sleepR:7,stopR:15,hurtR:0,dodge:2,pattern:[{id:Mt,weight:100}],run:1},"Wraith Knight":{name:"Wraith Knight",strength:68,agility:56,hp:[35,46],sleepR:5,stopR:0,hurtR:3,dodge:4,pattern:[{id:Bt,weight:75},{id:Mt,weight:25}],run:1},Golem:{name:"Golem",strength:120,agility:60,hp:[53,70],sleepR:15,stopR:15,hurtR:15,dodge:0,pattern:[{id:Mt,weight:100}],run:1},Goldman:{name:"Goldman",strength:48,agility:40,hp:[38,50],sleepR:13,stopR:15,hurtR:0,dodge:1,pattern:[{id:Mt,weight:100}],run:1},Knight:{name:"Knight",strength:76,agility:78,hp:[42,55],sleepR:6,stopR:7,hurtR:0,dodge:1,pattern:[{id:jt,weight:50},{id:Mt,weight:50}],run:1},Magiwyvern:{name:"Magiwyvern",strength:78,agility:68,hp:[44,58],sleepR:0,stopR:15,hurtR:0,dodge:0,pattern:[{id:Ut,weight:50},{id:Mt,weight:50}],run:1},"Demon Knight":{name:"Demon Knight",strength:79,agility:64,hp:[38,50],sleepR:15,stopR:15,hurtR:15,dodge:15,pattern:[{id:Mt,weight:100}],run:1},Werewolf:{name:"Werewolf",strength:86,agility:70,hp:[46,60],sleepR:7,stopR:15,hurtR:0,dodge:7,pattern:[{id:Mt,weight:100}],run:1},"Green Dragon":{name:"Green Dragon",strength:88,agility:74,hp:[49,65],sleepR:7,stopR:15,hurtR:2,dodge:2,pattern:[{id:$t,weight:25},{id:Mt,weight:75}],run:2},Starwyvern:{name:"Starwyvern",strength:86,agility:80,hp:[49,65],sleepR:8,stopR:0,hurtR:1,dodge:2,pattern:[{id:Gt,weight:75},{id:$t,weight:25},{id:Mt,weight:75}],run:2},Wizard:{name:"Wizard",strength:80,agility:70,hp:[49,65],sleepR:17,stopR:7,hurtR:15,dodge:2,pattern:[{id:Mt,weight:50},{id:Dt,weight:50}],run:2},"Axe Knight":{name:"Axe Knight",strength:94,agility:82,hp:[53,70],sleepR:15,stopR:3,hurtR:1,dodge:1,pattern:[{id:Ut,weight:25},{id:Mt,weight:75}],run:2},"Blue Dragon":{name:"Blue Dragon",strength:98,agility:84,hp:[53,70],sleepR:15,stopR:15,hurtR:7,dodge:2,pattern:[{id:$t,weight:25},{id:Mt,weight:75}],run:2},Stoneman:{name:"Stoneman",strength:100,agility:40,hp:[121,160],sleepR:2,stopR:15,hurtR:7,dodge:1,pattern:[{id:Mt,weight:100}],run:3},"Armored Knight":{name:"Armored Knight",strength:105,agility:86,hp:[68,90],sleepR:15,stopR:7,hurtR:1,dodge:2,pattern:[{id:Gt,weight:75},{id:Dt,weight:25},{id:Mt,weight:75}],run:3},"Red Dragon":{name:"Red Dragon",strength:120,agility:90,hp:[76,100],sleepR:15,stopR:7,hurtR:15,dodge:2,pattern:[{id:Ut,weight:25},{id:$t,weight:25},{id:Mt,weight:50}],run:3},"Dragonlord (first form)":{name:"Dragonlord (first form)",strength:90,agility:75,hp:[76,100],sleepR:15,stopR:15,hurtR:15,dodge:0,pattern:[{id:jt,weight:25},{id:Dt,weight:75},{id:Mt,weight:25}],voidCrit:T,run:3},"Dragonlord (second form)":{name:"Dragonlord (second form)",strength:140,agility:200,hp:130,sleepR:15,stopR:15,hurtR:15,dodge:0,pattern:[{id:"STRONGFIRE",weight:50},{id:Mt,weight:50}],voidCrit:T,run:3}};function It(e){return Wt[e.enemy]}const Vt={CAST_HEAL:"CAST_HEAL",CAST_HEALMORE:"CAST_HEALMORE",CAST_HURT:"CAST_HURT",CAST_HURTMORE:"CAST_HURTMORE",CAST_SLEEP:"CAST_SLEEP",CAST_STOPSPELL:"CAST_STOPSPELL",CHANGE_ARMOR:"CHANGE_ARMOR",CHANGE_ENEMY:"CHANGE_ENEMY",CHANGE_HERB:"CHANGE_HERB",CHANGE_LEVEL:"CHANGE_LEVEL",CHANGE_NAME:"CHANGE_NAME",CHANGE_SHIELD:"CHANGE_SHIELD",CHANGE_STATS:"CHANGE_STATS",CHANGE_WEAPON:"CHANGE_WEAPON",ENEMY_TURN:"ENEMY_TURN",FIGHT:"FIGHT",FIGHT_CLEANUP:"FIGHT_CLEANUP",RUN_AWAY:"RUN_AWAY",START_BATTLE:"START_BATTLE",USE_HERB:"USE_HERB"},Ft=e=>e.charAt(0).toUpperCase()+e.slice(1);function Yt(e,t){return{type:Vt.CAST_HEALMORE,hp:e,maxhp:t}}function Kt(e,t){return{type:Vt.CAST_HEAL,hp:e,maxhp:t}}function qt(e){return{type:Vt.CHANGE_ENEMY,enemy:e}}const zt={type:Vt.START_BATTLE},Xt={type:Vt.CHANGE_STATS},Jt={type:Vt.FIGHT_CLEANUP},Qt={type:Vt.ENEMY_TURN},Zt={type:Vt.CAST_HURT},en={type:Vt.CAST_SLEEP},tn={type:Vt.CAST_HURTMORE},nn={type:Vt.CAST_STOPSPELL},rn={type:Vt.USE_HERB},an={type:Vt.RUN_AWAY};var on=function(e,t){let n=t;const a=[];for(a.push(e);0!==a.length;){const o=a.pop();switch(console.log(o),o.type){case Vt.START_BATTLE:if(n=he(t),t.initiative){const e=[...n.battleText];e.push("The enemy gets to go first!"),n={...n,battleText:e},a.push(Qt)}break;case Vt.CAST_HURT:case Vt.CAST_HURTMORE:case Vt.CAST_HEAL:case Vt.CAST_HEALMORE:case Vt.CAST_SLEEP:case Vt.CAST_STOPSPELL:case Vt.FIGHT:case Vt.USE_HERB:case Vt.RUN_AWAY:{n=je(n,e);const{inBattle:t}=n;E(t,r)?a.push(Jt):a.push(Qt);break}case Vt.ENEMY_TURN:{const e=rt(n);E((n=e).inBattle,r)&&a.push(Jt);break}case Vt.FIGHT_CLEANUP:{a.push(Xt);const e=Ft(n.enemy.name);a.push(qt(e)),n={...n,cleanBattleText:T,enemySleep:0,enemyStop:r,playerSleep:r,sleepCount:6};break}case Vt.CHANGE_NAME:n={...n,player:Pt(o,n)},a.push(Xt);break;case Vt.CHANGE_WEAPON:n={...t,player:At(o,n)};break;case Vt.CHANGE_ARMOR:n={...n,player:xt(o,n)};break;case Vt.CHANGE_SHIELD:n={...n,player:kt(o,n)};break;case Vt.CHANGE_ENEMY:n={...n,enemy:It(o)};break;case Vt.CHANGE_LEVEL:{const{level:e}=o,t={...n.player,level:e};n={...n,player:t},a.push(Xt);break}case Vt.CHANGE_HERB:{const{herb:e}=o,t={...n.player,herbCount:e};n={...n,player:t};break}case Vt.CHANGE_STATS:n={...n,player:Ht(n)};break;default:return console.log("Got to default in update function"),console.log(`Attempted message was ${e}`),n}}return n},un=n(19),ln=n.n(un),sn=n(4);function cn(e){return e}var pn=i(cn);const{div:hn,h1:fn,p:dn,pre:yn,button:gn,input:mn,select:vn,option:bn}=ln()(sn.h),Sn=ve(e=>dn({},e)),Rn=(e,t=0)=>[...Array(e).keys()].map(e=>e+t),En=(e,t,n)=>hn({className:e},`${t}: ${n}`),Tn="pv2 ph2 dib",wn=["Choose an enemy","Slime","Red Slime","Drakee","Ghost","Magician","Magidrakee","Scorpion","Druin","Poltergeist","Droll","Drakeema","Skeleton","Warlock","Metal Scorpion","Wolf","Wraith","Metal Slime","Specter","Wolflord","Druinlord","Drollmagi","Wyvern","Rogue Scorpion","Wraith Knight","Golem","Goldman","Knight","Magiwyvern","Demon Knight","Werewolf","Green Dragon","Starwyvern","Wizard","Axe Knight","Blue Dragon","Stoneman","Armored Knight","Red Dragon","Dragonlord (first form)","Dragonlord (second form)"],An=Rn(30,1),xn=Rn(7),kn=["Unarmed","Bamboo Pole","Club","Copper Sword","Hand Axe","Broad Sword","Flame Sword","Erdrick's Sword"],Nn=["Naked","Clothes","Leather Armor","Chain Mail","Half Plate","Full Plate","Magic Armor","Erdrick's Armor"],On=["Naked","Small Shield","Large Shield","Silver Shield"];function _n(e,t,n){const{enemy:a,inBattle:o}=n,i=$(t.level>=3?K(gn({onclick:t=>e(Kt)},"Heal")):pn,t.level>=4?K(gn({onclick:t=>e(Zt)},"Hurt")):pn,t.level>=7?K(gn({onclick:t=>e(en)},"Sleep")):pn,t.level>=10?K(gn({onclick:t=>e(nn)},"Stopspell")):pn,t.level>=17?K(gn({onclick:t=>e(Yt)},"Healmore")):pn,t.level>=19?K(gn({onclick:t=>e(tn)},"Hurtmore")):pn,t.herbCount>0?K(gn({onclick:t=>e(rn)},"Use Herb")):pn,K(gn({onclick:t=>e(an)},"Run Away")));return E(o,r)?gn({onclick:t=>e(zt)},"Start Battle"):i([gn({onclick:n=>e(function(e,t){return{type:Vt.FIGHT,player:e,enemy:t}}(t,a))},"Attack")])}function Cn(e=""){const t=e;return ve(e=>bn({value:e,selected:E(t,e)},e),wn)}function Hn(e,t){return hn({className:"w-25 mh3"},[hn({className:""},"Player Name:"),mn({oninput:t=>e(function(e){return{type:Vt.CHANGE_NAME,name:e}}(t.target.value))},"Player Name"),hn({className:"mv2"},"Player Level:"),vn({className:"db pa2 ba input-reset br1 bg-white ba b--black",onchange:t=>e(function(e){return{type:Vt.CHANGE_LEVEL,level:e}}(parseInt(t.target.value,10)))},(i=t.level,ve(e=>bn({value:e,selected:E(i,e)},e),An))),hn({className:"mv2"},"Player Weapon:"),vn({className:"db pa2 ba input-reset br1 bg-white ba b--black",onchange:t=>e(function(e){return{type:Vt.CHANGE_WEAPON,weapon:e}}(t.target.value))},(o=t.weapon,ve(e=>bn({value:e,selected:E(o,e)},e),kn))),hn({className:"mv2"},"Player Armor:"),vn({className:"db pa2 ba input-reset br1 bg-white ba b--black",onchange:t=>e(function(e){return{type:Vt.CHANGE_ARMOR,armor:e}}(t.target.value))},(a=t.armor,ve(e=>bn({value:e,selected:E(a,e)},e),Nn))),hn({className:"mv2"},"Player Shield:"),vn({className:"db pa2 ba input-reset br1 bg-white ba b--black",onchange:t=>e(function(e){return{type:Vt.CHANGE_SHIELD,shield:e}}(t.target.value))},(r=t.shield,ve(e=>bn({value:e,selected:E(r,e)},e),On))),hn({className:"mv2"},"Herb Amount:"),vn({className:"db pa2 ba input-reset br1 bg-white ba b--black",onchange:t=>e(function(e){return{type:Vt.CHANGE_HERB,herb:e}}(parseInt(t.target.value,10)))},(n=t.herbCount,ve(e=>bn({value:e,selected:E(n,e)},e),xn)))]);var n,r,a,o,i}function Pn(e,t){const{hp:n,maxhp:r,mp:a,weapon:o,armor:i,shield:u,level:l}=t;return hn({className:"w-25 mh3"},[hn({className:""},"Player Stats:"),En(Tn,"Player Level",`${l}`),En(Tn,"Player Health",`${n} / ${r}`),En(Tn,"Player Magic",a),En(Tn,"Player Weapon",o.name),En(Tn,"Player Armor",i.name),En(Tn,"Player Shield",u.name)])}function Mn(e,t,n){const{hp:a}=t;return E(n,r)?hn({className:"w-25 mh3"},[hn({},"Enemy:"),vn({className:"db pa2 ba input-reset br1 bg-white ba b--black",onchange:t=>e(qt(t.target.value))},Cn(t.name))]):hn({className:"w-25 mh3"},[En(Tn,"Enemy Health",a)])}function Ln(e,t,n,r){return hn({className:"flex"},[Hn(e,t),Mn(e,n,r.inBattle),Pn(0,t)])}var Dn=n(9),Bn=n.n(Dn);(function(e,t,n,r){let a=e,o=n(function e(r){a=t(r,a);const u=n(e,a),l=Object(sn.diff)(o,u);i=Object(sn.patch)(i,l);const s=document.getElementById("scrollbox");s.scrollTop=s.scrollHeight,o=u},a),i=Bn()(o);r.appendChild(i)})(a,on,function(e,t){const{player:n,enemy:r}=t;return hn({className:"mw8 center"},[fn({className:"f2 pv2 bb"},"Dragon Quest 1 Battle Simulator"),hn("#scrollbox",{className:"h5 overflow-y-scroll"},Sn(t.battleText)),_n(e,n,t),Ln(e,n,r,t),yn(JSON.stringify(t,null,2))])},document.getElementById("app"))}]);